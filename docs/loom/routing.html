<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>routing.py</title>
  <link rel="stylesheet" href="../pycco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <div class='section'>
    <div class='docs'><h1>routing.py</h1></div>
  </div>
  <div class='clearall'>
  <div class='section' id='section-0'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-0'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">handlers</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-1'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-1'>#</a>
      </div>
      <p>User ID</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="n">RE_ObjectID</span> <span class="o">=</span> <span class="s1">r&#39;([a-fA-F0-9]{24})&#39;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-2'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-2'>#</a>
      </div>
      <p>Endpoints</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="n">API</span>         <span class="o">=</span> <span class="s1">r&#39;/api&#39;</span>
<span class="n">USERS</span>       <span class="o">=</span> <span class="n">API</span>       <span class="o">+</span> <span class="s1">r&#39;/users&#39;</span>
<span class="n">USER</span>        <span class="o">=</span> <span class="n">USERS</span>     <span class="o">+</span> <span class="s1">r&#39;/{user_id}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="n">RE_ObjectID</span><span class="p">)</span>

<span class="n">STORIES</span>     <span class="o">=</span> <span class="n">API</span>       <span class="o">+</span> <span class="s1">r&#39;/stories&#39;</span>
<span class="n">STORY</span>       <span class="o">=</span> <span class="n">STORIES</span>   <span class="o">+</span> <span class="s1">r&#39;/{story_id}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">story_id</span><span class="o">=</span><span class="n">RE_ObjectID</span><span class="p">)</span>
<span class="n">CHAPTER</span>     <span class="o">=</span> <span class="n">STORY</span>     <span class="o">+</span> <span class="s1">r&#39;/{chapter_id}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">chapter_id</span><span class="o">=</span><span class="n">RE_ObjectID</span><span class="p">)</span>
<span class="n">PARAGRAPH</span>   <span class="o">=</span> <span class="n">CHAPTER</span>   <span class="o">+</span> <span class="s1">r&#39;/{paragraph_id}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">paragraph_id</span><span class="o">=</span><span class="n">RE_ObjectID</span><span class="p">)</span>

<span class="n">WIKIS</span>       <span class="o">=</span> <span class="n">API</span>       <span class="o">+</span> <span class="s1">r&#39;/wikis&#39;</span>
<span class="n">WIKI</span>        <span class="o">=</span> <span class="n">WIKIS</span>     <span class="o">+</span> <span class="s1">r&#39;/{wiki_id}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">wiki_id</span><span class="o">=</span><span class="n">RE_ObjectID</span><span class="p">)</span>
<span class="n">PAGE</span>        <span class="o">=</span> <span class="n">WIKI</span>      <span class="o">+</span> <span class="s1">r&#39;/{page_id}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">page_id</span><span class="o">=</span><span class="n">RE_ObjectID</span><span class="p">)</span>

<span class="n">ROUTES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">r&#39;/ws/echo&#39;</span><span class="p">,</span>   <span class="n">handlers</span><span class="o">.</span><span class="n">websockets</span><span class="o">.</span><span class="n">EchoHandler</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">r&#39;/ws/v2&#39;</span><span class="p">,</span>     <span class="n">handlers</span><span class="o">.</span><span class="n">websockets</span><span class="o">.</span><span class="n">LoomHandler</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">r&#39;/ws/v2/test&#39;</span><span class="p">,</span> <span class="n">handlers</span><span class="o">.</span><span class="n">websockets</span><span class="o">.</span><span class="n">TestHandler</span><span class="p">),</span>
    <span class="p">(</span><span class="n">API</span><span class="p">,</span>           <span class="n">handlers</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">RedirectHandler</span><span class="p">,</span>      <span class="nb">dict</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s1">&#39;http://plotypus.github.io/api&#39;</span><span class="p">)),</span>  <span class="c1"># GET: redirect to plotypus.github.io/api</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-3'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-3'>#</a>
      </div>
      <p>TODO: don't return a list here</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="p">(</span><span class="n">USERS</span><span class="p">,</span>         <span class="n">handlers</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">UsersHandler</span><span class="p">),</span>  <span class="c1"># GET: list of users; POST: create user</span>
    <span class="p">(</span><span class="n">USER</span><span class="p">,</span>          <span class="o">...</span><span class="p">),</span>   <span class="c1"># GET: user information</span>
    <span class="p">(</span><span class="n">STORIES</span><span class="p">,</span>       <span class="n">handlers</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">story</span><span class="o">.</span><span class="n">StoriesHandler</span><span class="p">),</span>  <span class="c1"># GET: list of user&#39;s stories; POST: create new story</span>
    <span class="p">(</span><span class="n">STORY</span><span class="p">,</span>         <span class="n">handlers</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">story</span><span class="o">.</span><span class="n">StoryHandler</span><span class="p">),</span>  <span class="c1"># GET: story content &amp; list of chapters; POST: new chapter</span>
    <span class="p">(</span><span class="n">CHAPTER</span><span class="p">,</span>       <span class="n">handlers</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">story</span><span class="o">.</span><span class="n">ChapterHandler</span><span class="p">),</span>  <span class="c1"># GET: chapter content &amp; list of paragraphs; POST: new paragraph</span>
    <span class="p">(</span><span class="n">PARAGRAPH</span><span class="p">,</span>     <span class="n">handlers</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">story</span><span class="o">.</span><span class="n">ParagraphHandler</span><span class="p">),</span>  <span class="c1"># GET: N/A</span>
    <span class="p">(</span><span class="n">WIKIS</span><span class="p">,</span>         <span class="o">...</span><span class="p">),</span>  <span class="c1"># GET: list of user&#39;s wikis; POST: create new wiki</span>
    <span class="p">(</span><span class="n">WIKI</span><span class="p">,</span>          <span class="o">...</span><span class="p">),</span>  <span class="c1"># GET: wiki information; POST: create new wiki page</span>
    <span class="p">(</span><span class="n">PAGE</span><span class="p">,</span>          <span class="o">...</span><span class="p">),</span>  <span class="c1"># GET: retrieve information about the page; POST: write to the page</span>
<span class="p">]</span>

</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
</div>
</body>
